<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.emucoo.mapper.TShopInfoMapper" >
  <resultMap id="BaseResultMap" type="com.emucoo.model.TShopInfo" >
    <!--
      WARNING - @mbg.generated
    -->
    <id column="id" property="id" jdbcType="BIGINT" />
    <result column="shop_name" property="shopName" jdbcType="VARCHAR" />
    <result column="short_name" property="shortName" jdbcType="VARCHAR" />
    <result column="shop_code" property="shopCode" jdbcType="VARCHAR" />
    <result column="shop_desc" property="shopDesc" jdbcType="VARCHAR" />
    <result column="province" property="province" jdbcType="VARCHAR" />
    <result column="city" property="city" jdbcType="VARCHAR" />
    <result column="district" property="district" jdbcType="VARCHAR" />
    <result column="address" property="address" jdbcType="VARCHAR" />
    <result column="shop_manager_id" property="shopManagerId" jdbcType="BIGINT" />
    <result column="area_id" property="areaId" jdbcType="BIGINT" />
    <result column="brand_id" property="brandId" jdbcType="BIGINT" />
    <result column="tel" property="tel" jdbcType="VARCHAR" />
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
    <result column="create_user_id" property="createUserId" jdbcType="BIGINT" />
    <result column="modify_time" property="modifyTime" jdbcType="TIMESTAMP" />
    <result column="modify_user_id" property="modifyUserId" jdbcType="BIGINT" />
    <result column="is_del" property="isDel" jdbcType="BIT" />
    <result column="org_id" property="orgId" jdbcType="BIGINT" />
    <result column="is_use" property="isUse" jdbcType="BIT" />
  </resultMap>

  <select id="fetchShopsOfUser" resultMap="BaseResultMap">
    select a.* from t_shop_info a right join sys_user_shop b on a.id=b.shop_id where b.user_id=#{id}
  </select>

  <select id="selectShopListByUserAndArea" resultType="com.emucoo.model.TShopInfo">
      SELECT
      shop.id,
      shop.shop_name,
      shop.short_name,
      shop.shop_desc
      FROM t_shop_info shop
      INNER JOIN sys_user_shop userShop ON userShop.shop_id = shop.id
      AND userShop.user_id = #{userId}
      WHERE shop.area_id = #{areaId}
  </select>
</mapper>